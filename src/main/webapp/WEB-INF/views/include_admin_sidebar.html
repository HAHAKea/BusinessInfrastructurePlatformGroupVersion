<%@ page language="java" pageEncoding="UTF-8"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<div class="admin-sidebar am-offcanvas" id="admin-offcanvas">

  <div class="am-offcanvas-bar admin-offcanvas-bar">
    <ul class="am-list admin-sidebar-list">
      <li><a href="${pageContext.request.contextPath}/admin/adminIndex"><span class="am-icon-home"></span> 首页 </a></li>

      <sec:authorize access="hasPermission('user','user:list')">
        <li onclick="loadIframeContent('${pageContext.request.contextPath}/admin/user/adminList')">
          <a href="#"><span class="am-icon-users"></span> 用户管理 </a>
        </li>
      </sec:authorize>

      <sec:authorize access="hasPermission('role','role:list') or hasPermission('role','role:roleuser')">
        <li class="admin-parent">
          <a class="am-cf" data-am-collapse="{target: '#collapse-nav-role'}" onclick="keepFocusOnIframe()">
            <span class="am-icon-wheelchair-alt"></span> 角色管理 <span class="am-icon-angle-right am-fr am-margin-right"></span></a>
          <ul class="am-list am-collapse admin-sidebar-sub" id="collapse-nav-role">
            <sec:authorize access="hasPermission('role','role:list')">
              <li onclick="loadIframeContent('${pageContext.request.contextPath}/admin/role/adminList')">
                <a href="#" class="am-cf"><span class="am-icon-list-ol"></span>角色列表</a>
              </li>
            </sec:authorize>

            <sec:authorize access="hasPermission('role','role:roleuser')">
              <li onclick="loadIframeContent('${pageContext.request.contextPath}/admin/role/adminListWithUsers')">
                <a href="#"><span class="am-icon-puzzle-piece"></span>用户角色</a>
              </li>
            </sec:authorize>
          </ul>
        </li>
      </sec:authorize>

      <sec:authorize access="hasPermission('permission','permission:list')">
        <li onclick="loadIframeContent('${pageContext.request.contextPath}/admin/permission/adminList')">
          <a href="#"><span class="am-icon-university"></span>权限管理</a>
        </li>
      </sec:authorize>
      
      <sec:authorize access="hasPermission('organization','organization:list')">
        <li onclick="loadIframeContent('${pageContext.request.contextPath}/admin/organization/adminList')">
          <a href="#"><span class="am-icon-object-group"></span> 组织结构管理 </a>
        </li>
      </sec:authorize>

      <sec:authorize access="hasPermission('system','system:list')">
        <li class="admin-parent">
          <a class="am-cf" data-am-collapse="{target: '#collapse-nav-actionMonitor'}" onclick="keepFocusOnIframe()">
            <span class="am-icon-gears"></span> 系统设置 <span class="am-icon-angle-right am-fr am-margin-right"></span></a>
          <ul class="am-list am-collapse admin-sidebar-sub" id="collapse-nav-actionMonitor">
            <sec:authorize access="hasPermission('actionMonitor','actionMonitor:list')">
              <li onclick="loadIframeContent('${pageContext.request.contextPath}/admin/actionMonitor/adminList')">
                <a href="#" class="am-cf"><span class="am-icon-check"></span>行为监控</a>
              </li>
            </sec:authorize>
            <!-- 
            <li onclick="loadIframeContent('${pageContext.request.contextPath}/admin/systemLog')">
                <a href="#" class="am-cf"><span class="am-icon-check"></span>系统日志</a>
            </li>
            -->
          </ul>
        </li>
      </sec:authorize>

      <li><a href="${pageContext.request.contextPath}/logout"><span class="am-icon-sign-out"></span> 注销</a></li>
    </ul>
  </div>

</div>
